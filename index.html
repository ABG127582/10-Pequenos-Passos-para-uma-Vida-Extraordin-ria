<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pequenos Passos</title>
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&family=Caveat:wght@700&display=swap" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Google Material Symbols -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <link rel="stylesheet" href="index.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script type="importmap">
{
  "imports": {
    "@google/genai": "https://aistudiocdn.com/@google/genai@^1.21.0",
    "dompurify": "https://aistudiocdn.com/dompurify@^3.2.7",
    "path": "https://aistudiocdn.com/path@^0.12.7",
    "vite": "https://aistudiocdn.com/vite@^7.1.7",
    "@vitejs/plugin-basic-ssl": "https://aistudiocdn.com/@vitejs/plugin-basic-ssl@^2.1.0"
  }
}
</script>
</head>
<body>

    <!-- Nova Tela de Login -->
    <div id="login-page">
        <div class="login-container">
            <h1>Pequenos Passos</h1>
            <p>Seu assistente para uma vida extraordinária.</p>
            
            <form id="login-form">
                <div class="form-group">
                    <label for="profile-email-input">Email (Seu Perfil)</label>
                    <input type="email" id="profile-email-input" placeholder="seu-email@exemplo.com" required>
                </div>
                <div class="form-group">
                    <label for="profile-password-input">Senha</label>
                    <input type="password" id="profile-password-input" placeholder="••••••••">
                     <small style="font-size: 0.75rem; color: var(--text-color-muted);">A senha é um campo visual e não é armazenada.</small>
                </div>
                <button type="submit" id="login-btn" class="standard-button" style="width: 100%; margin-top: 1rem;">Entrar</button>
            </form>

            <div id="existing-profiles-container" style="display: none; margin-top: 1.5rem;">
                <p>Ou selecione um perfil existente:</p>
                <div id="existing-profiles-list" class="existing-profiles-list"></div>
            </div>
        </div>
    </div>


    <!-- Conteúdo principal do App (inicialmente oculto) -->
    <div id="app-container" style="display: none;">
        <nav id="sidebar-menu" class="sidebar">
            <div>
                <button id="sidebar-toggle" class="sidebar-toggle-button" aria-label="Alternar menu lateral" aria-expanded="false">
                    <i class="fas fa-bars"></i>
                </button>
                
                <ul class="sidebar-links">
                     <li><a href="#inicio" title="Início" class="sidebar-link" data-page="inicio" data-tooltip="Início"><i class="fas fa-home fa-fw"></i><span class="sidebar-text">Início</span></a></li>

                    <li>
                        <details id="sidebar-details-fisica">
                            <summary class="sidebar-link" data-page-parent="fisica" data-tooltip="Física"><i class="fas fa-heart-pulse fa-fw"></i><span class="sidebar-text">Física</span><i class="fas fa-chevron-right sidebar-chevron"></i></summary>
                            <ul>
                                <li><a href="#fisica" class="sidebar-link sub-link" data-page="fisica">Visão Geral</a></li>
                                <li><a href="#leitura-guia-fisica" class="sidebar-link sub-link" data-page="leitura-guia-fisica">Guia de Leitura</a></li>
                                <li><a href="#alongamento" class="sidebar-link sub-link" data-page="alongamento">Guia de Alongamento</a></li>
                                <li><a href="#alimentacao-forte" class="sidebar-link sub-link" data-page="alimentacao-forte">Guia de Alimentação</a></li>
                            </ul>
                        </details>
                    </li>
                    
                    <li>
                        <details id="sidebar-details-mental">
                            <summary class="sidebar-link" data-page-parent="mental" data-tooltip="Mental"><i class="fas fa-brain fa-fw"></i><span class="sidebar-text">Mental</span><i class="fas fa-chevron-right sidebar-chevron"></i></summary>
                            <ul>
                                <li><a href="#mental" class="sidebar-link sub-link" data-page="mental">Visão Geral</a></li>
                                <li><a href="#leitura-guia-mental" class="sidebar-link sub-link" data-page="leitura-guia-mental">Guia de Leitura</a></li>
                                <li><a href="#sono" class="sidebar-link sub-link" data-page="sono">Qualidade do Sono</a></li>
                            </ul>
                        </details>
                    </li>

                    <li>
                         <details id="sidebar-details-financeira">
                            <summary class="sidebar-link" data-page-parent="financeira" data-tooltip="Financeira"><i class="fas fa-piggy-bank fa-fw"></i><span class="sidebar-text">Financeira</span><i class="fas fa-chevron-right sidebar-chevron"></i></summary>
                            <ul>
                                <li><a href="#financeira" class="sidebar-link sub-link" data-page="financeira">Visão Geral</a></li>
                                <li><a href="#leitura-guia-financeira" class="sidebar-link sub-link" data-page="leitura-guia-financeira">Guia de Leitura</a></li>
                            </ul>
                        </details>
                    </li>

                    <li>
                         <details id="sidebar-details-familiar">
                            <summary class="sidebar-link" data-page-parent="familiar" data-tooltip="Familiar"><i class="fas fa-users fa-fw"></i><span class="sidebar-text">Familiar</span><i class="fas fa-chevron-right sidebar-chevron"></i></summary>
                            <ul>
                                <li><a href="#familiar" class="sidebar-link sub-link" data-page="familiar">Visão Geral</a></li>
                                <li><a href="#leitura-guia-familiar" class="sidebar-link sub-link" data-page="leitura-guia-familiar">Guia de Leitura</a></li>
                            </ul>
                        </details>
                    </li>
                    
                    <li><a href="#profissional" title="Saúde Profissional" class="sidebar-link" data-page="profissional" data-tooltip="Profissional"><i class="fas fa-briefcase fa-fw"></i><span class="sidebar-text">Profissional</span></a></li>
                    <li><a href="#social" title="Saúde Social" class="sidebar-link" data-page="social" data-tooltip="Social"><i class="fas fa-user-group fa-fw"></i><span class="sidebar-text">Social</span></a></li>

                    <li>
                         <details id="sidebar-details-espiritual">
                            <summary class="sidebar-link" data-page-parent="espiritual" data-tooltip="Espiritual"><i class="fas fa-om fa-fw"></i><span class="sidebar-text">Espiritual</span><i class="fas fa-chevron-right sidebar-chevron"></i></summary>
                            <ul>
                                <li><a href="#espiritual" class="sidebar-link sub-link" data-page="espiritual">Visão Geral</a></li>
                                <li><a href="#leitura-guia-espiritual" class="sidebar-link sub-link" data-page="leitura-guia-espiritual">Guia de Leitura</a></li>
                            </ul>
                        </details>
                    </li>
                    
                    <li><a href="#preventiva" title="Saúde Preventiva" class="sidebar-link" data-page="preventiva" data-tooltip="Preventiva"><i class="fas fa-shield-halved fa-fw"></i><span class="sidebar-text">Preventiva</span></a></li>
                    <li><a href="#" id="open-contract-sidebar" title="Contrato de Compromisso" class="sidebar-link" data-tooltip="Contrato"><i class="fas fa-file-signature fa-fw"></i><span class="sidebar-text">Contrato</span></a></li>
                    <li><a href="#planejamento-diario" title="Planejamento Diário" class="sidebar-link" data-page="planejamento-diario" data-tooltip="Planejamento"><i class="fas fa-calendar-day fa-fw"></i><span class="sidebar-text">Planejamento Diário</span></a></li>
                    <li><a href="#tarefas" title="Caixa de Entrada" class="sidebar-link" data-page="tarefas" data-tooltip="Tarefas"><i class="fas fa-inbox fa-fw"></i><span class="sidebar-text">Tarefas</span></a></li>
                    <li><a href="#reflexoes-diarias" title="Reflexões Diárias" class="sidebar-link" data-page="reflexoes-diarias" data-tooltip="Reflexões"><i class="fas fa-lightbulb fa-fw"></i><span class="sidebar-text">Reflexões</span></a></li>
                    <li><a href="#reflexao-estoica" title="Reflexão Estoica" class="sidebar-link" data-page="reflexao-estoica" data-tooltip="Reflexão Estoica"><i class="fas fa-pen-nib fa-fw"></i><span class="sidebar-text">Reflexão Estoica</span></a></li>
                    <li><a href="#conquistas" title="Minhas Conquistas" class="sidebar-link" data-page="conquistas" data-tooltip="Conquistas"><i class="fas fa-trophy fa-fw"></i><span class="sidebar-text">Conquistas</span></a></li>
                </ul>
            </div>
            <div class="sidebar-footer">
                <div id="user-profile-widget" class="user-profile-widget" style="display: none;">
                    <i class="fas fa-user-circle"></i>
                    <div class="user-info">
                        <div class="user-profile-name-level">
                            <span id="user-profile-name"></span>
                            <span id="user-level">Nível 1</span>
                        </div>
                        <div class="user-profile-ps-bar-container">
                            <div id="user-ps-bar" class="user-profile-ps-bar" style="width: 0%;"></div>
                        </div>
                        <span id="user-ps-progress-text" class="user-profile-ps-text">0 / 200 PS</span>
                    </div>
                    <button id="switch-profile-btn" title="Trocar Perfil" class="action-btn"><i class="fas fa-exchange-alt"></i></button>
                </div>
                 <button id="theme-toggle" class="theme-toggle-button" aria-label="Ativar modo claro">
                    <i class="fas fa-sun"></i>
                </button>
            </div>
        </nav>

        <main id="main-content">
            <nav id="breadcrumb-nav" aria-label="breadcrumb"></nav>
            <div id="page-content-wrapper">
                 <!-- Page content will be loaded here dynamically -->
            </div>
        </main>
    </div>
    
    <!-- Global Floating Action Buttons and Audio -->
    <div class="fab-container">
        <button id="tts-stop-btn" class="fab-button tts-fab-stop" aria-label="Parar leitura" style="display: none;"><i class="fas fa-stop"></i></button>
        <button id="tts-play-btn" class="fab-button tts-fab-play" aria-label="Ler página em voz alta"><i class="fas fa-volume-up"></i></button>
        <button id="rain-sound-toggle" class="fab-button rain-sound-button" aria-label="Tocar som de chuva">
            <i class="fas fa-cloud-rain"></i>
        </button>
    </div>
    <audio id="rain-sound" src="https://www.soundjay.com/nature/rain-07.mp3" loop></audio>

    <!-- Global Modals -->
    <div id="contract-modal" class="modal-container" style="display: none;" role="dialog" aria-modal="true" aria-labelledby="contract-modal-title-static">
        <div class="modal-content large-modal-content">
            <header class="modal-header">
                <h2 id="contract-modal-title-static">Contrato de Compromisso Pessoal</h2>
                <button id="contract-modal-close-btn" class="modal-close-button" aria-label="Fechar Contrato"><i class="fas fa-times"></i></button>
            </header>
            <div id="contract-modal-body" class="modal-body">
                <form id="contract-form">
                    <p>Eu, <input type="text" id="contract-name" placeholder="Seu Nome Completo" class="inline-input" required><span class="print-only-value"></span>, nascido(a) em <input type="date" id="contract-birthdate" class="inline-input"><span class="print-only-value"></span>, firmo este contrato de compromisso pessoal e intransferível comigo mesmo(a).</p>
                    
                    <div class="form-group">
                        <label for="contract-commitment"><strong>Cláusula 1: O Compromisso</strong></label>
                        <p>Comprometo-me a dedicar tempo, energia e esforço para melhorar minha saúde e bem-estar em todas as áreas da minha vida, reconhecendo que pequenas ações consistentes levam a grandes transformações. Este compromisso é um ato de autocuidado e amor-próprio.</p>
                        <div class="input-wrapper textarea-wrapper">
                            <textarea id="contract-commitment" rows="4" placeholder="Detalhe seu compromisso pessoal aqui. Ex: Comprometo-me a ser mais paciente comigo mesmo(a) e a celebrar cada pequena vitória no meu processo de desenvolvimento..."></textarea>
                            <span class="print-only-value"></span>
                            <button type="button" class="speech-to-text-btn" title="Digitar por Voz"><i class="fas fa-microphone"></i></button>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="contract-period"><strong>Cláusula 2: O Prazo</strong></label>
                        <p>Este contrato é válido pelo período de <input type="text" id="contract-period" placeholder="Ex: 90 dias, 6 meses, 1 ano" class="inline-input"><span class="print-only-value"></span>, a contar da data de assinatura, podendo ser renovado e reavaliado conforme meu progresso e novas metas.</p>
                    </div>

                    <div class="form-group">
                        <label for="contract-goals"><strong>Cláusula 3: As Metas</strong></label>
                        <p>Durante a vigência deste contrato, focarei em alcançar as seguintes metas principais (seja específico):</p>
                         <div class="input-wrapper textarea-wrapper">
                            <textarea id="contract-goals" rows="6" placeholder="Ex: 1. Saúde Física: Perder 5kg e correr 5km. 2. Saúde Financeira: Economizar R$1000 para a reserva de emergência. 3. Saúde Mental: Praticar meditação 3x por semana..."></textarea>
                             <span class="print-only-value"></span>
                            <button type="button" class="speech-to-text-btn" title="Digitar por Voz"><i class="fas fa-microphone"></i></button>
                        </div>
                    </div>

                     <div class="form-group signature-group">
                        <label for="contract-date"><strong>Assinatura e Data</strong></label>
                        <p>Assino o presente contrato em sinal de meu comprometimento e determinação.</p>
                        <div class="signature-line-container">
                             <input type="text" id="contract-signature" class="signature-input" placeholder="Digite seu nome para assinar" required>
                             <span class="print-only-value"></span>
                             <input type="date" id="contract-date" required>
                             <span class="print-only-value"></span>
                        </div>
                    </div>
                </form>
                 <div style="margin-top: 2rem; padding: 1rem; background-color: rgba(var(--color-secondary-rgb), 0.1); border-radius: var(--card-border-radius); font-size: 0.85rem; color: var(--text-color-muted);">
                    <i class="fas fa-lock"></i> <strong>Privacidade:</strong> Todos os dados inseridos neste contrato são armazenados exclusivamente no seu dispositivo local. Nenhuma informação é enviada para a internet.
                </div>
            </div>
            <footer id="contract-modal-actions" class="modal-footer">
                 <button type="button" id="contract-modal-print-btn" class="standard-button-secondary"><i class="fas fa-print"></i> Imprimir</button>
                 <button type="button" id="contract-modal-cancel-btn" class="standard-button-secondary">Fechar</button>
                 <button type="button" id="contract-modal-save-btn" class="standard-button"><i class="fas fa-save"></i> Salvar Contrato</button>
            </footer>
        </div>
    </div>

    <!-- TTS Settings Modal -->
    <div id="tts-settings-modal" class="modal-container" style="display: none;" role="dialog" aria-modal="true" aria-labelledby="tts-settings-title">
        <div class="modal-content">
            <header class="modal-header">
                <h2 id="tts-settings-title">Configurações de Leitura</h2>
                <button id="tts-settings-close-btn" class="modal-close-button" aria-label="Fechar Configurações"><i class="fas fa-times"></i></button>
            </header>
            <div class="modal-body">
                <div class="form-group">
                    <label for="tts-voice-select">Voz:</label>
                    <select id="tts-voice-select">
                        <option value="">Carregando vozes...</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="tts-rate-slider">Velocidade: <span id="tts-rate-value">1.2</span></label>
                    <input type="range" id="tts-rate-slider" min="0.5" max="2" step="0.1" value="1.2">
                </div>
                <div class="form-group">
                    <label for="tts-pitch-slider">Tom: <span id="tts-pitch-value">1.0</span></label>
                    <input type="range" id="tts-pitch-slider" min="0" max="2" step="0.1" value="1.0">
                </div>
            </div>
            <footer class="modal-footer">
                 <button id="tts-settings-test-btn" class="standard-button-secondary">Testar Voz</button>
                 <button id="tts-start-reading-btn" class="standard-button">Iniciar Leitura</button>
            </footer>
        </div>
    </div>

    <!-- Unified Task Modal -->
    <div id="unified-task-modal" class="modal-container" role="dialog" aria-modal="true" aria-labelledby="unified-task-modal-title" style="display: none;">
        <div class="modal-content">
            <header class="modal-header">
                <h2 id="unified-task-modal-title">Adicionar Tarefa</h2>
                <button id="unified-task-modal-close-btn" class="modal-close-button" aria-label="Fechar modal de tarefa"><i class="fas fa-times"></i></button>
            </header>
            <form id="unified-task-form">
                <div class="modal-body">
                    <div class="form-group">
                        <label for="unified-task-title">Título:</label>
                        <div class="input-wrapper">
                            <input type="text" id="unified-task-title" name="title" required>
                            <button type="button" class="speech-to-text-btn" title="Digitar por Voz"><i class="fas fa-microphone"></i></button>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="unified-task-description">Descrição:</label>
                        <div class="input-wrapper textarea-wrapper">
                            <textarea id="unified-task-description" name="description" rows="1"></textarea>
                            <button type="button" class="speech-to-text-btn" title="Digitar por Voz"><i class="fas fa-microphone"></i></button>
                        </div>
                    </div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                        <div class="form-group">
                            <label for="unified-task-due-date">Data:</label>
                            <input type="date" id="unified-task-due-date" name="dueDate">
                        </div>
                        <div class="form-group">
                            <label for="unified-task-priority">Prioridade:</label>
                            <select id="unified-task-priority" name="priority">
                                <option value="low">Baixa</option>
                                <option value="medium" selected>Média</option>
                                <option value="high">Alta</option>
                            </select>
                        </div>
                    </div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                        <div class="form-group">
                            <label for="unified-task-start-time">Início (Opcional):</label>
                            <input type="time" id="unified-task-start-time" name="startTime" step="300">
                        </div>
                        <div class="form-group">
                            <label for="unified-task-end-time">Fim (Opcional):</label>
                            <input type="time" id="unified-task-end-time" name="endTime" step="300">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="unified-task-category">Categoria:</label>
                        <select id="unified-task-category" name="category">
                             <!-- Categories will be populated by JS -->
                        </select>
                    </div>
                </div>
                <footer class="modal-footer">
                    <button type="button" id="unified-task-delete-btn" class="standard-button-danger" style="margin-right: auto; display: none;">Excluir</button>
                    <button type="submit" class="standard-button">Salvar Tarefa</button>
                    <button type="button" id="unified-task-cancel-btn" class="standard-button-secondary">Cancelar</button>
                </footer>
            </form>
        </div>
    </div>
    
    <!-- Add/Edit Asset Modal -->
    <div id="asset-modal" class="modal-container" style="display: none;" role="dialog" aria-modal="true" aria-labelledby="asset-modal-title">
        <div class="modal-content">
            <header class="modal-header">
                <h2 id="asset-modal-title">Editar Item</h2>
                <button id="asset-modal-close-btn" class="modal-close-button" aria-label="Fechar"><i class="fas fa-times"></i></button>
            </header>
            <div class="modal-body">
                <form id="asset-edit-form">
                    <div class="form-group">
                        <label for="asset-name-edit-input">Nome do Item:</label>
                        <input type="text" id="asset-name-edit-input" required>
                    </div>
                    <div class="form-group">
                        <label for="asset-purchase-date-edit-input">Data da Compra:</label>
                        <input type="date" id="asset-purchase-date-edit-input" required>
                    </div>
                </form>
            </div>
            <footer class="modal-footer">
                <button id="asset-modal-cancel-btn" type="button" class="standard-button-secondary">Cancelar</button>
                <button id="save-asset-edit-btn" type="submit" form="asset-edit-form" class="standard-button">Salvar Alterações</button>
            </footer>
        </div>
    </div>


    <!-- Image Viewer Modal -->
    <div id="image-viewer-modal" class="modal-container" style="display: none;" role="dialog" aria-modal="true" aria-label="Visualizador de Imagem">
        <div class="image-viewer-content">
            <button id="image-viewer-close-btn" class="modal-close-button" aria-label="Fechar Imagem"><i class="fas fa-times"></i></button>
            <img id="image-viewer-img" src="" alt="Imagem ampliada">
        </div>
    </div>

    <!-- Confirmation Modal -->
    <div id="confirm-modal" class="modal-container confirm-modal-container" style="display: none;" role="alertdialog" aria-modal="true" aria-labelledby="confirm-modal-message">
        <div class="modal-content confirm-modal-content">
            <div class="modal-body">
                <p id="confirm-modal-message">Você tem certeza?</p>
            </div>
            <footer class="modal-footer">
                <button id="confirm-modal-no" class="standard-button-secondary">Não</button>
                <button id="confirm-modal-yes" class="standard-button-danger">Sim</button>
            </footer>
        </div>
    </div>

    <!-- AI Insights Modal -->
    <div id="ai-insights-modal" class="modal-container" style="display: none;" role="dialog" aria-modal="true" aria-labelledby="ai-insights-title">
        <div class="modal-content large-modal-content">
            <header class="modal-header">
                <h2 id="ai-insights-title">Insights Gerados por IA</h2>
                <button id="ai-insights-close-btn" class="modal-close-button" aria-label="Fechar Insights"><i class="fas fa-times"></i></button>
            </header>
            <div id="ai-insights-body" class="modal-body">
                <!-- AI content will be injected here -->
            </div>
            <footer class="modal-footer">
                <button id="ai-insights-copy-btn" class="standard-button-secondary"><i class="fas fa-copy"></i> Copiar</button>
                <button id="ai-insights-ok-btn" class="standard-button">Fechar</button>
            </footer>
        </div>
    </div>

    <!-- Level Up Modal -->
    <div id="level-up-modal" class="modal-container" style="display: none;" role="dialog" aria-modal="true" aria-labelledby="level-up-title">
        <div class="modal-content level-up-content">
            <div class="modal-body">
                <div class="level-up-animation">🎉</div>
                <h2 id="level-up-title">Parabéns!</h2>
                <p>Você alcançou o <strong id="new-level-text">Nível 2</strong>!</p>
                <p>Continue com os pequenos passos para uma vida extraordinária.</p>
            </div>
            <footer class="modal-footer">
                <button id="level-up-close-btn" class="standard-button">Continuar</button>
            </footer>
        </div>
    </div>

    <!-- Achievement Unlocked Modal -->
    <div id="achievement-unlocked-modal" class="modal-container" style="display: none;" role="dialog" aria-modal="true" aria-labelledby="achievement-unlocked-title">
        <div class="modal-content level-up-content">
            <div class="modal-body">
                <div id="achievement-animation-icon" class="level-up-animation"></div>
                <h2 id="achievement-unlocked-title" class="level-up-title">Conquista Desbloqueada!</h2>
                <p id="achievement-unlocked-text">Você alcançou a marca de 7 dias!</p>
                <p id="achievement-unlocked-bonus" style="font-size: 1.2rem; font-weight: bold; color: var(--color-success); margin-top: 1rem;">+100 PS</p>
            </div>
            <footer class="modal-footer">
                <button id="achievement-unlocked-close-btn" class="standard-button">Continuar</button>
            </footer>
        </div>
    </div>


    <!-- Toast Notification Container -->
    <div id="toast-notification-container" aria-live="assertive" aria-atomic="true"></div>

    <script type="module" src="index.tsx"></script>
</body>
</html>